name: repo-top-dev one-shot agent

on:
  workflow_dispatch:
    inputs:
      prompt:
        description: 'Prompt for repo-top-dev agent'
        required: true
        type: string
  workflow_call:
    inputs:
      prompt:
        description: 'Prompt for repo-top-dev agent'
        required: true
        type: string

permissions:
  actions: read
  contents: write
  issues: write
  pull-requests: write
  checks: write

jobs:
  run-agent:
    runs-on: ubuntu-latest
    timeout-minutes: 30
    steps:
      - name: Run repo-top-dev agent
        uses: github/agent@v0
        with:
          agent: repo-top-dev
          prompt: ${{ inputs.prompt }}
